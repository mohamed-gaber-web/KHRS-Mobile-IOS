<ion-toolbar>
  <ion-title>
    My Courses
  </ion-title>
</ion-toolbar>

<ion-content>
  <ion-spinner *ngIf='isLoading' color="primary" name="crescent"></ion-spinner>

  <ion-grid class="img-course-intro">
    <ion-row>
      <ion-col>
        <div class="img-intro">
          <ion-img loading="lazy" src="../../../assets/images/shutterstock_360072566.jpg"></ion-img>
        </div>
        <div class="icon-sound" (click)="startAudio(courseAudio)">
          <div class="img-volume">
            <ion-img
            class="animate__animated animate__jello animate__delay-2s animate__bounce animate__repeat-2" src="../../../assets/icon/Vector.png">
          </ion-img>
          </div>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>


  <ion-grid>
    <ion-row class="ion-text-center">


        <!-- IOn Ref -->
        <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
          <ion-refresher-content
            pullingIcon="chevron-down-circle-outline"
            pullingText="Pull to refresh"
            refreshingSpinner="circles"
            refreshingText="Refreshing...">
          </ion-refresher-content>
        </ion-refresher>
        <!-- Ion Ref -->

        <ion-col *ngFor="let course of myCourses" size-sm="12" size-md="12" size-lg="4" size-xl="3">

        <ion-card class="course">
          <ion-img class="img-all-course" loading="lazy"  src="{{course.course.imagePath}}"></ion-img>
          <h3 class="ion-padding-top"  color="primary">
            {{course.course.courseTranslations[0]?.title}}
          </h3>
          <ion-item>

            <div slot="end" *ngIf="course.course.courseTranslations[0]?.introVoicePath">
              <div class="icon-sound-course">
                  <ion-icon  class="animate__animated animate__jello animate__delay-2s animate__bounce animate__repeat-3" [name]="!course.course.audioElement.status? 'play' : 'stop'" (click)="playIntroHTML(course.course)">
                  </ion-icon>
                </div>
            </div>
            <div class="start" *ngIf="course.userCourse.status == 5">
              <ion-button slot="end"
              (click)="goToChooseCourseMaterial(course.course.id, course.userCourse.courseId)">
                <ion-icon name="eye-outline"></ion-icon>
                Start
              </ion-button>
            </div>
            <div class="start" class="applied" *ngIf="course.userCourse.status == 4">
              <ion-button fill="outline">
                <ion-icon name="time-outline"></ion-icon>
                Pending
              </ion-button>
            </div>
            <div *ngIf="course.userCourse.status == 1">
                <ion-text>Passed</ion-text>
            </div>

            <div class="certi" *ngIf="course.userCourse.status == 1">
              <ion-button (click)="downloadCertificate(course.course.id)"> Certificate
                <ion-icon name="download-outline"></ion-icon>
                <ion-spinner *ngIf='isLoading' name="circles"></ion-spinner> </ion-button>
            </div>


            <div class="start" class="expired" *ngIf="course.userCourse.status == 2">
              <ion-button fill="outline">
                <ion-icon name="lock-closed-outline"></ion-icon> Expired</ion-button>
            </div>
            <div class="start" class="expired" *ngIf="course.userCourse.status == 3">
              <ion-button fill="outline" >
                <ion-icon name="lock-closed-outline"></ion-icon> Failed</ion-button>
            </div>
          </ion-item>
        </ion-card>

      </ion-col>



    </ion-row>
  </ion-grid>
  <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)">
    <ion-infinite-scroll-content
      loadingSpinner="bubbles"
      loadingText="Loading more data...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>


</ion-content>
